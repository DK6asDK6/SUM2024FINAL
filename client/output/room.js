var roomBundled=function(e){"use strict";let t,n,s,o,a,r,l,c,m,i=!1;function d(){let e=s.value;if(s.value="",i&&""!=$("#chars").val()&&""!=e){let n=$("#chars").val();t.send(JSON.stringify({type:"message",author:r,character:n,room:c,message:e}))}else{let n=document.getElementById("chars");if(null!=n.options[0]){let s=n.options[n.selectedIndex].text;""!=r&&""!=e&&t.send(JSON.stringify({type:"message",author:r,character:s,room:c,message:e}))}}}function u(){t=new WebSocket("ws://0.0.0.0:8000");let e=document.getElementById("info").textContent.split("/");r=e[0].trim(),c=e[1],e=e[1].split(":"),l=e[1].trim().substring(0,e[1].indexOf("\n")),m=e[0].trim(),console.log("name "+r),console.log("room global "+c),console.log("room "+l),console.log("master "+m),t.onopen=()=>{console.log("open"),t.send(JSON.stringify({type:"Player",name:r,masterName:m})),t.send(JSON.stringify({type:"User",room:c})),setTimeout((()=>{t.send(JSON.stringify({type:"Player",name:r,masterName:m}))}),3e3)},t.onmessage=e=>{!function(e){let t=JSON.parse(e);switch(t.type){case"characters":a=t.characters,document.getElementById("chars").innerHTML="";for(let e of a)document.getElementById("chars").innerHTML+=`\n      <option value=${e}>${e}</option>\n      `;break;case"master":i=!0,document.getElementById("charSelector").innerHTML='\n        <label for="chars">Enter character (you don\'t need to create full character for NPC):</label>\n        <br />\n        <input type="text" name="chars" id="chars" />\n      ';break;case"message":let e=function(e,t,n){let s="ot_mes";return"System"==e.author?s="sys":e.author==t?s="mes":e.author==n?s="mas":e.toMaster?s="to_mas":""!=e.toUser&&(s="to_you"),`\n    <div class=${s}>\n      <div class="mes_user">\n        ${e.char}(${e.author})\n      </div>  \n      <div class="mes_message">\n        ${e.mes}\n      </div>\n    </div>\n    `}(t.message,r,m);t.message.toMaster&&r!=m&&t.message.author!=r||""!=t.message.toUser&&r!=t.message.toUser&&t.message.author!=r||o.insertAdjacentHTML("beforeend",e)}}(e.data)}}function g(){n=document.getElementById("send"),n.addEventListener("click",d),s=document.getElementById("msg"),o=document.getElementById("messager"),u()}return window.onload=g,e.logOut=function(){window.localStorage.clear(),window.sessionStorage.clear()},e.onLoad=g,e}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9vbS5qcyIsInNvdXJjZXMiOlsiLi4vcm9vbS9yb29tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYXJhY3RlciB9IGZyb20gXCIuLi9jbGFzc2VzL2NsYXNzZXNcIjtcblxubGV0IHNvY2tldDtcblxubGV0IGJ1dHRvbjsgLy8gQW50b25cbmxldCBzZW5kQXJlYSwgbWVzc2FnZUFyZWE7XG5cbmxldCBhcnI7XG5sZXQgaXNNYXN0ZXIgPSBmYWxzZTtcblxubGV0IG5hbWUsIHJvb21OYW1lLCByb29tR2xvYmFsTmFtZSwgbWFzdGVyTmFtZTtcblxuZnVuY3Rpb24gdG9IVE1MKG1lc3NhZ2UsIGNsaWVudCwgbWFzdGVyKSB7XG4gIGxldCBfY2xhc3MgPSBcIm90X21lc1wiO1xuXG4gIGlmIChtZXNzYWdlLmF1dGhvciA9PSBcIlN5c3RlbVwiKSBfY2xhc3MgPSBcInN5c1wiO1xuICBlbHNlIGlmIChtZXNzYWdlLmF1dGhvciA9PSBjbGllbnQpIF9jbGFzcyA9IFwibWVzXCI7XG4gIGVsc2UgaWYgKG1lc3NhZ2UuYXV0aG9yID09IG1hc3RlcikgX2NsYXNzID0gXCJtYXNcIjtcbiAgZWxzZSBpZiAobWVzc2FnZS50b01hc3RlcikgX2NsYXNzID0gXCJ0b19tYXNcIjtcbiAgZWxzZSBpZiAobWVzc2FnZS50b1VzZXIgIT0gXCJcIikgX2NsYXNzID0gXCJ0b195b3VcIjtcblxuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9JHtfY2xhc3N9PlxuICAgICAgPGRpdiBjbGFzcz1cIm1lc191c2VyXCI+XG4gICAgICAgICR7bWVzc2FnZS5jaGFyfSgke21lc3NhZ2UuYXV0aG9yfSlcbiAgICAgIDwvZGl2PiAgXG4gICAgICA8ZGl2IGNsYXNzPVwibWVzX21lc3NhZ2VcIj5cbiAgICAgICAgJHttZXNzYWdlLm1lc31cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG59XG5cbmZ1bmN0aW9uIG9uQnRuQ2xpY2soKSB7XG4gIGxldCBtZXNzYWdlID0gc2VuZEFyZWEudmFsdWU7XG4gIHNlbmRBcmVhLnZhbHVlID0gXCJcIjtcbiAgaWYgKGlzTWFzdGVyICYmICQoXCIjY2hhcnNcIikudmFsKCkgIT0gXCJcIiAmJiBtZXNzYWdlICE9IFwiXCIpIHtcbiAgICBsZXQgY2hhck5hbWUgPSAkKFwiI2NoYXJzXCIpLnZhbCgpO1xuICAgIHNvY2tldC5zZW5kKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgICAgYXV0aG9yOiBuYW1lLFxuICAgICAgICBjaGFyYWN0ZXI6IGNoYXJOYW1lLFxuICAgICAgICByb29tOiByb29tR2xvYmFsTmFtZSxcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnNcIik7XG4gICAgaWYgKGUub3B0aW9uc1swXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBjaGFyTmFtZSA9IGUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXhdLnRleHQ7XG4gICAgICBpZiAobmFtZSAhPSBcIlwiICYmIG1lc3NhZ2UgIT0gXCJcIikge1xuICAgICAgICBzb2NrZXQuc2VuZChcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgIGF1dGhvcjogbmFtZSxcbiAgICAgICAgICAgIGNoYXJhY3RlcjogY2hhck5hbWUsXG4gICAgICAgICAgICByb29tOiByb29tR2xvYmFsTmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhY3RPbk1lc3NhZ2UoZGF0YSkge1xuICBsZXQgbWVzID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgc3dpdGNoIChtZXMudHlwZSkge1xuICAgIGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG4gICAgICBhcnIgPSBtZXMuY2hhcmFjdGVycztcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnNcIikuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIGZvciAobGV0IGNoYXJhY3RlciBvZiBhcnIpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFyc1wiKS5pbm5lckhUTUwgKz0gYFxuICAgICAgPG9wdGlvbiB2YWx1ZT0ke2NoYXJhY3Rlcn0+JHtjaGFyYWN0ZXJ9PC9vcHRpb24+XG4gICAgICBgO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1hc3RlclwiOlxuICAgICAgaXNNYXN0ZXIgPSB0cnVlO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFyU2VsZWN0b3JcIikuaW5uZXJIVE1MID0gYFxuICAgICAgICA8bGFiZWwgZm9yPVwiY2hhcnNcIj5FbnRlciBjaGFyYWN0ZXIgKHlvdSBkb24ndCBuZWVkIHRvIGNyZWF0ZSBmdWxsIGNoYXJhY3RlciBmb3IgTlBDKTo8L2xhYmVsPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImNoYXJzXCIgaWQ9XCJjaGFyc1wiIC8+XG4gICAgICBgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgIC8vIGNvbnNvbGUubG9nKG1lcy5tZXNzYWdlKTtcblxuICAgICAgbGV0IGNvZGUgPSB0b0hUTUwobWVzLm1lc3NhZ2UsIG5hbWUsIG1hc3Rlck5hbWUpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIG1lcy5tZXNzYWdlLnRvTWFzdGVyICYmXG4gICAgICAgIG5hbWUgIT0gbWFzdGVyTmFtZSAmJlxuICAgICAgICBtZXMubWVzc2FnZS5hdXRob3IgIT0gbmFtZVxuICAgICAgKSB7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBtZXMubWVzc2FnZS50b1VzZXIgIT0gXCJcIiAmJlxuICAgICAgICBuYW1lICE9IG1lcy5tZXNzYWdlLnRvVXNlciAmJlxuICAgICAgICBtZXMubWVzc2FnZS5hdXRob3IgIT0gbmFtZVxuICAgICAgKSB7XG4gICAgICB9IGVsc2UgbWVzc2FnZUFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGNvZGUpO1xuXG4gICAgICBicmVhaztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nT3V0KCkge1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xufVxuXG5mdW5jdGlvbiBpbml0Q29tbXVuaWNhdGlvbigpIHtcbiAgc29ja2V0ID0gbmV3IFdlYlNvY2tldChcIndzOi8vMC4wLjAuMDo4MDAwXCIpO1xuICBsZXQgaW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mb1wiKTtcbiAgbGV0IHN0ID0gaW5mby50ZXh0Q29udGVudC5zcGxpdChcIi9cIik7XG4gIGRlYnVnZ2VyO1xuICBuYW1lID0gc3RbMF0udHJpbSgpO1xuICByb29tR2xvYmFsTmFtZSA9IHN0WzFdO1xuICBzdCA9IHN0WzFdLnNwbGl0KFwiOlwiKTtcbiAgcm9vbU5hbWUgPSBzdFsxXS50cmltKCkuc3Vic3RyaW5nKDAsIHN0WzFdLmluZGV4T2YoXCJcXG5cIikpO1xuICBtYXN0ZXJOYW1lID0gc3RbMF0udHJpbSgpO1xuXG4gIGNvbnNvbGUubG9nKFwibmFtZSBcIiArIG5hbWUpO1xuICBjb25zb2xlLmxvZyhcInJvb20gZ2xvYmFsIFwiICsgcm9vbUdsb2JhbE5hbWUpO1xuICBjb25zb2xlLmxvZyhcInJvb20gXCIgKyByb29tTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwibWFzdGVyIFwiICsgbWFzdGVyTmFtZSk7XG5cbiAgc29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIm9wZW5cIik7XG5cbiAgICBzb2NrZXQuc2VuZChcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJQbGF5ZXJcIiwgbmFtZTogbmFtZSwgbWFzdGVyTmFtZTogbWFzdGVyTmFtZSB9KVxuICAgICk7XG5cbiAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwiVXNlclwiLCByb29tOiByb29tR2xvYmFsTmFtZSB9KSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNvY2tldC5zZW5kKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwiUGxheWVyXCIsIG5hbWU6IG5hbWUsIG1hc3Rlck5hbWU6IG1hc3Rlck5hbWUgfSlcbiAgICAgICk7XG4gICAgfSwgMzAwMCk7XG4gIH07XG5cbiAgc29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgIHJlYWN0T25NZXNzYWdlKGV2ZW50LmRhdGEpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25Mb2FkKCkge1xuICBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbmRcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25CdG5DbGljayk7XG5cbiAgc2VuZEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1zZ1wiKTtcbiAgbWVzc2FnZUFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VyXCIpO1xuXG4gIGluaXRDb21tdW5pY2F0aW9uKCk7XG59XG5cbndpbmRvdy5vbmxvYWQgPSBvbkxvYWQ7XG4iXSwibmFtZXMiOlsic29ja2V0IiwiYnV0dG9uIiwic2VuZEFyZWEiLCJtZXNzYWdlQXJlYSIsImFyciIsIm5hbWUiLCJyb29tTmFtZSIsInJvb21HbG9iYWxOYW1lIiwibWFzdGVyTmFtZSIsImlzTWFzdGVyIiwib25CdG5DbGljayIsIm1lc3NhZ2UiLCJ2YWx1ZSIsIiQiLCJ2YWwiLCJjaGFyTmFtZSIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImF1dGhvciIsImNoYXJhY3RlciIsInJvb20iLCJlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVuZGVmaW5lZCIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidGV4dCIsImluaXRDb21tdW5pY2F0aW9uIiwiV2ViU29ja2V0Iiwic3QiLCJ0ZXh0Q29udGVudCIsInNwbGl0IiwidHJpbSIsInN1YnN0cmluZyIsImluZGV4T2YiLCJjb25zb2xlIiwibG9nIiwib25vcGVuIiwic2V0VGltZW91dCIsIm9ubWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsIm1lcyIsInBhcnNlIiwiY2hhcmFjdGVycyIsImlubmVySFRNTCIsImNvZGUiLCJjbGllbnQiLCJtYXN0ZXIiLCJfY2xhc3MiLCJ0b01hc3RlciIsInRvVXNlciIsImNoYXIiLCJ0b0hUTUwiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJyZWFjdE9uTWVzc2FnZSIsIm9uTG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJvbmxvYWQiLCJsb2NhbFN0b3JhZ2UiLCJjbGVhciIsInNlc3Npb25TdG9yYWdlIl0sIm1hcHBpbmdzIjoieUNBRUEsSUFBSUEsRUFFQUMsRUFDQUMsRUFBVUMsRUFFVkMsRUFHQUMsRUFBTUMsRUFBVUMsRUFBZ0JDLEVBRmhDQyxHQUFXLEVBeUJmLFNBQVNDLElBQ1AsSUFBSUMsRUFBVVQsRUFBU1UsTUFFdkIsR0FEQVYsRUFBU1UsTUFBUSxHQUNiSCxHQUFpQyxJQUFyQkksRUFBRSxVQUFVQyxPQUEwQixJQUFYSCxFQUFlLENBQ3hELElBQUlJLEVBQVdGLEVBQUUsVUFBVUMsTUFDM0JkLEVBQU9nQixLQUNMQyxLQUFLQyxVQUFVLENBQ2JDLEtBQU0sVUFDTkMsT0FBUWYsRUFDUmdCLFVBQVdOLEVBQ1hPLEtBQU1mLEVBQ05JLFFBQVNBLElBR2pCLEtBQVMsQ0FDTCxJQUFJWSxFQUFJQyxTQUFTQyxlQUFlLFNBQ2hDLEdBQW9CQyxNQUFoQkgsRUFBRUksUUFBUSxHQUFpQixDQUM3QixJQUFJWixFQUFXUSxF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
