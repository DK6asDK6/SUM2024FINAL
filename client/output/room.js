var roomBundled=function(e){"use strict";let t,n,s,o,a,r,l,c,m,i=!1;function d(){let e=s.value;if(s.value="",i&&""!=$("#chars").val()&&""!=e){let n=$("#chars").val();t.send(JSON.stringify({type:"message",author:r,character:n,room:c,message:e}))}else{let n=document.getElementById("chars");if(null!=n.options[0]){let s=n.options[n.selectedIndex].text;""!=r&&""!=e&&t.send(JSON.stringify({type:"message",author:r,character:s,room:c,message:e}))}}}function u(){t=new WebSocket("ws://brook-nettle-devourer.glitch.me");let e=document.getElementById("info").textContent.split("/");r=e[0].trim(),c=e[1],e=e[1].split(":"),l=e[1].trim().substring(0,e[1].indexOf("\n")),m=e[0].trim(),console.log("name "+r),console.log("room global "+c),console.log("room "+l),console.log("master "+m),t.onopen=()=>{console.log("open"),t.send(JSON.stringify({type:"Player",name:r,masterName:m})),t.send(JSON.stringify({type:"User",room:c})),setTimeout((()=>{t.send(JSON.stringify({type:"Player",name:r,masterName:m}))}),3e3)},t.onmessage=e=>{!function(e){let t=JSON.parse(e);switch(t.type){case"characters":a=t.characters,document.getElementById("chars").innerHTML="";for(let e of a)document.getElementById("chars").innerHTML+=`\n      <option value=${e}>${e}</option>\n      `;break;case"master":i=!0,document.getElementById("charSelector").innerHTML='\n        <label for="chars">Enter character (you don\'t need to create full character for NPC):</label>\n        <br />\n        <input type="text" name="chars" id="chars" />\n      ';break;case"message":let e=function(e,t,n){let s="ot_mes";return"System"==e.author?s="sys":e.author==t?s="mes":e.author==n?s="mas":e.toMaster?s="to_mas":""!=e.toUser&&(s="to_you"),`\n    <div class=${s}>\n      <div class="mes_user">\n        ${e.char}(${e.author})\n      </div>  \n      <div class="mes_message">\n        ${e.mes}\n      </div>\n    </div>\n    `}(t.message,r,m);t.message.toMaster&&r!=m&&t.message.author!=r||""!=t.message.toUser&&r!=t.message.toUser&&t.message.author!=r||o.insertAdjacentHTML("beforeend",e)}}(e.data)}}function g(){n=document.getElementById("send"),n.addEventListener("click",d),s=document.getElementById("msg"),o=document.getElementById("messager"),u()}return window.onload=g,e.logOut=function(){window.localStorage.clear(),window.sessionStorage.clear()},e.onLoad=g,e}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9vbS5qcyIsInNvdXJjZXMiOlsiLi4vcm9vbS9yb29tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoYXJhY3RlciB9IGZyb20gXCIuLi9jbGFzc2VzL2NsYXNzZXNcIjtcblxubGV0IHNvY2tldDtcblxubGV0IGJ1dHRvbjsgLy8gQW50b25cbmxldCBzZW5kQXJlYSwgbWVzc2FnZUFyZWE7XG5cbmxldCBhcnI7XG5sZXQgaXNNYXN0ZXIgPSBmYWxzZTtcblxubGV0IG5hbWUsIHJvb21OYW1lLCByb29tR2xvYmFsTmFtZSwgbWFzdGVyTmFtZTtcblxuZnVuY3Rpb24gdG9IVE1MKG1lc3NhZ2UsIGNsaWVudCwgbWFzdGVyKSB7XG4gIGxldCBfY2xhc3MgPSBcIm90X21lc1wiO1xuXG4gIGlmIChtZXNzYWdlLmF1dGhvciA9PSBcIlN5c3RlbVwiKSBfY2xhc3MgPSBcInN5c1wiO1xuICBlbHNlIGlmIChtZXNzYWdlLmF1dGhvciA9PSBjbGllbnQpIF9jbGFzcyA9IFwibWVzXCI7XG4gIGVsc2UgaWYgKG1lc3NhZ2UuYXV0aG9yID09IG1hc3RlcikgX2NsYXNzID0gXCJtYXNcIjtcbiAgZWxzZSBpZiAobWVzc2FnZS50b01hc3RlcikgX2NsYXNzID0gXCJ0b19tYXNcIjtcbiAgZWxzZSBpZiAobWVzc2FnZS50b1VzZXIgIT0gXCJcIikgX2NsYXNzID0gXCJ0b195b3VcIjtcblxuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9JHtfY2xhc3N9PlxuICAgICAgPGRpdiBjbGFzcz1cIm1lc191c2VyXCI+XG4gICAgICAgICR7bWVzc2FnZS5jaGFyfSgke21lc3NhZ2UuYXV0aG9yfSlcbiAgICAgIDwvZGl2PiAgXG4gICAgICA8ZGl2IGNsYXNzPVwibWVzX21lc3NhZ2VcIj5cbiAgICAgICAgJHttZXNzYWdlLm1lc31cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG59XG5cbmZ1bmN0aW9uIG9uQnRuQ2xpY2soKSB7XG4gIGxldCBtZXNzYWdlID0gc2VuZEFyZWEudmFsdWU7XG4gIHNlbmRBcmVhLnZhbHVlID0gXCJcIjtcbiAgaWYgKGlzTWFzdGVyICYmICQoXCIjY2hhcnNcIikudmFsKCkgIT0gXCJcIiAmJiBtZXNzYWdlICE9IFwiXCIpIHtcbiAgICBsZXQgY2hhck5hbWUgPSAkKFwiI2NoYXJzXCIpLnZhbCgpO1xuICAgIHNvY2tldC5zZW5kKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgICAgYXV0aG9yOiBuYW1lLFxuICAgICAgICBjaGFyYWN0ZXI6IGNoYXJOYW1lLFxuICAgICAgICByb29tOiByb29tR2xvYmFsTmFtZSxcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnNcIik7XG4gICAgaWYgKGUub3B0aW9uc1swXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBjaGFyTmFtZSA9IGUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXhdLnRleHQ7XG4gICAgICBpZiAobmFtZSAhPSBcIlwiICYmIG1lc3NhZ2UgIT0gXCJcIikge1xuICAgICAgICBzb2NrZXQuc2VuZChcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgIGF1dGhvcjogbmFtZSxcbiAgICAgICAgICAgIGNoYXJhY3RlcjogY2hhck5hbWUsXG4gICAgICAgICAgICByb29tOiByb29tR2xvYmFsTmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhY3RPbk1lc3NhZ2UoZGF0YSkge1xuICBsZXQgbWVzID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgc3dpdGNoIChtZXMudHlwZSkge1xuICAgIGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG4gICAgICBhcnIgPSBtZXMuY2hhcmFjdGVycztcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnNcIikuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIGZvciAobGV0IGNoYXJhY3RlciBvZiBhcnIpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFyc1wiKS5pbm5lckhUTUwgKz0gYFxuICAgICAgPG9wdGlvbiB2YWx1ZT0ke2NoYXJhY3Rlcn0+JHtjaGFyYWN0ZXJ9PC9vcHRpb24+XG4gICAgICBgO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1hc3RlclwiOlxuICAgICAgaXNNYXN0ZXIgPSB0cnVlO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFyU2VsZWN0b3JcIikuaW5uZXJIVE1MID0gYFxuICAgICAgICA8bGFiZWwgZm9yPVwiY2hhcnNcIj5FbnRlciBjaGFyYWN0ZXIgKHlvdSBkb24ndCBuZWVkIHRvIGNyZWF0ZSBmdWxsIGNoYXJhY3RlciBmb3IgTlBDKTo8L2xhYmVsPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImNoYXJzXCIgaWQ9XCJjaGFyc1wiIC8+XG4gICAgICBgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgIC8vIGNvbnNvbGUubG9nKG1lcy5tZXNzYWdlKTtcblxuICAgICAgbGV0IGNvZGUgPSB0b0hUTUwobWVzLm1lc3NhZ2UsIG5hbWUsIG1hc3Rlck5hbWUpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIG1lcy5tZXNzYWdlLnRvTWFzdGVyICYmXG4gICAgICAgIG5hbWUgIT0gbWFzdGVyTmFtZSAmJlxuICAgICAgICBtZXMubWVzc2FnZS5hdXRob3IgIT0gbmFtZVxuICAgICAgKSB7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBtZXMubWVzc2FnZS50b1VzZXIgIT0gXCJcIiAmJlxuICAgICAgICBuYW1lICE9IG1lcy5tZXNzYWdlLnRvVXNlciAmJlxuICAgICAgICBtZXMubWVzc2FnZS5hdXRob3IgIT0gbmFtZVxuICAgICAgKSB7XG4gICAgICB9IGVsc2UgbWVzc2FnZUFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGNvZGUpO1xuXG4gICAgICBicmVhaztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nT3V0KCkge1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xufVxuXG5mdW5jdGlvbiBpbml0Q29tbXVuaWNhdGlvbigpIHtcbiAgc29ja2V0ID0gbmV3IFdlYlNvY2tldChcIndzOi8vYnJvb2stbmV0dGxlLWRldm91cmVyLmdsaXRjaC5tZVwiKTtcbiAgbGV0IGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZm9cIik7XG4gIGxldCBzdCA9IGluZm8udGV4dENvbnRlbnQuc3BsaXQoXCIvXCIpO1xuICBkZWJ1Z2dlcjtcbiAgbmFtZSA9IHN0WzBdLnRyaW0oKTtcbiAgcm9vbUdsb2JhbE5hbWUgPSBzdFsxXTtcbiAgc3QgPSBzdFsxXS5zcGxpdChcIjpcIik7XG4gIHJvb21OYW1lID0gc3RbMV0udHJpbSgpLnN1YnN0cmluZygwLCBzdFsxXS5pbmRleE9mKFwiXFxuXCIpKTtcbiAgbWFzdGVyTmFtZSA9IHN0WzBdLnRyaW0oKTtcblxuICBjb25zb2xlLmxvZyhcIm5hbWUgXCIgKyBuYW1lKTtcbiAgY29uc29sZS5sb2coXCJyb29tIGdsb2JhbCBcIiArIHJvb21HbG9iYWxOYW1lKTtcbiAgY29uc29sZS5sb2coXCJyb29tIFwiICsgcm9vbU5hbWUpO1xuICBjb25zb2xlLmxvZyhcIm1hc3RlciBcIiArIG1hc3Rlck5hbWUpO1xuXG4gIHNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJvcGVuXCIpO1xuXG4gICAgc29ja2V0LnNlbmQoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwiUGxheWVyXCIsIG5hbWU6IG5hbWUsIG1hc3Rlck5hbWU6IG1hc3Rlck5hbWUgfSlcbiAgICApO1xuXG4gICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIlVzZXJcIiwgcm9vbTogcm9vbUdsb2JhbE5hbWUgfSkpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzb2NrZXQuc2VuZChcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIlBsYXllclwiLCBuYW1lOiBuYW1lLCBtYXN0ZXJOYW1lOiBtYXN0ZXJOYW1lIH0pXG4gICAgICApO1xuICAgIH0sIDMwMDApO1xuICB9O1xuXG4gIHNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICByZWFjdE9uTWVzc2FnZShldmVudC5kYXRhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uTG9hZCgpIHtcbiAgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW5kXCIpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQnRuQ2xpY2spO1xuXG4gIHNlbmRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtc2dcIik7XG4gIG1lc3NhZ2VBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlclwiKTtcblxuICBpbml0Q29tbXVuaWNhdGlvbigpO1xufVxuXG53aW5kb3cub25sb2FkID0gb25Mb2FkO1xuIl0sIm5hbWVzIjpbInNvY2tldCIsImJ1dHRvbiIsInNlbmRBcmVhIiwibWVzc2FnZUFyZWEiLCJhcnIiLCJuYW1lIiwicm9vbU5hbWUiLCJyb29tR2xvYmFsTmFtZSIsIm1hc3Rlck5hbWUiLCJpc01hc3RlciIsIm9uQnRuQ2xpY2siLCJtZXNzYWdlIiwidmFsdWUiLCIkIiwidmFsIiwiY2hhck5hbWUiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJhdXRob3IiLCJjaGFyYWN0ZXIiLCJyb29tIiwiZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ1bmRlZmluZWQiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInRleHQiLCJpbml0Q29tbXVuaWNhdGlvbiIsIldlYlNvY2tldCIsInN0IiwidGV4dENvbnRlbnQiLCJzcGxpdCIsInRyaW0iLCJzdWJzdHJpbmciLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsIm9ub3BlbiIsInNldFRpbWVvdXQiLCJvbm1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJtZXMiLCJwYXJzZSIsImNoYXJhY3RlcnMiLCJpbm5lckhUTUwiLCJjb2RlIiwiY2xpZW50IiwibWFzdGVyIiwiX2NsYXNzIiwidG9NYXN0ZXIiLCJ0b1VzZXIiLCJjaGFyIiwidG9IVE1MIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicmVhY3RPbk1lc3NhZ2UiLCJvbkxvYWQiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93Iiwib25sb2FkIiwibG9jYWxTdG9yYWdlIiwiY2xlYXIiLCJzZXNzaW9uU3RvcmFnZSJdLCJtYXBwaW5ncyI6InlDQUVBLElBQUlBLEVBRUFDLEVBQ0FDLEVBQVVDLEVBRVZDLEVBR0FDLEVBQU1DLEVBQVVDLEVBQWdCQyxFQUZoQ0MsR0FBVyxFQXlCZixTQUFTQyxJQUNQLElBQUlDLEVBQVVULEVBQVNVLE1BRXZCLEdBREFWLEVBQVNVLE1BQVEsR0FDYkgsR0FBaUMsSUFBckJJLEVBQUUsVUFBVUMsT0FBMEIsSUFBWEgsRUFBZSxDQUN4RCxJQUFJSSxFQUFXRixFQUFFLFVBQVVDLE1BQzNCZCxFQUFPZ0IsS0FDTEMsS0FBS0MsVUFBVSxDQUNiQyxLQUFNLFVBQ05DLE9BQVFmLEVBQ1JnQixVQUFXTixFQUNYTyxLQUFNZixFQUNOSSxRQUFTQSxJQUdqQixLQUFTLENBQ0wsSUFBSVksRUFBSUMsU0FBU0MsZUFBZSxTQUNoQyxHQUFvQkMsTUFBaEJILEVBQUVJLFFBQVEsR0FBaUIs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
